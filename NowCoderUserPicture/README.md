【设计题】今日头条会根据用户的浏览行为、内容偏好等信息，为每个用户抽象出一个标签化的用户画像，用于内容推荐。
用户画像的存储、高并发访问，是推荐系统的重要环节之一。现在请你给出一个用户画像存储、访问方案，
设计的时候请考虑一下几个方面：

1. 用户画像如何存储

2. 如何保证在线高并发、低延迟地访问

3. 机器宕机、负载均衡问题

4. 如果用户增长很快，在你的方案下，该如何做扩容

对于数据的应用就是基于业务来做的，业务和数据双向驱动

https://blog.csdn.net/xiaoshunzi111/article/details/53170658

答：
1. 存储
在实际的项目中，常用的用户画像数据存储除了常规关系型数据库外，应用比较多的是Hbase和Elasticsearch集群的快速检索。
所以在实际使用时，如果选型，要根据具体的业务来选择。

直观的表达就是用Hbase集群来存储用户的数据，使用rowkey快速检索方式来构建查询。

直观的表达就是用ES集群来存储用户的数据，使用ES快速检索方式来构建查询。


2. 并发
参考AWS的负载均衡器，前面是个DNS负载均衡，通过域名解析直接分配到后面的负载均衡组，
负载均衡组再转发给后面的服务器。
DNS负载均衡这一层只负责分配负载均衡服务器，并且DNS解析结果可以被客户端缓存，所以DNS层的吞吐量极大，而负责转发的负载均衡器本身就已经是负载均衡的了，单台要处理的流量当然就小得多了。当然，事实上DNS负载均衡也是负载均衡的，这里按下不表。所以：的确只要够薄，那么一个入口也是可以做到的，譬如说薄到DNS这样的程度。

作者：Ivony
链接：https://www.zhihu.com/question/50233887/answer/120881917
来源：知乎
著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。
https://blog.csdn.net/zhangliangzi/article/details/51202050

3. 服务器宕机
NGINX，
https://www.jianshu.com/p/32536bd51b2a

4. 扩容
https://www.jianshu.com/p/0570931eae33